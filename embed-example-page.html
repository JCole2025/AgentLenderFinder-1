<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BiggerPockets Agent Finder Widget Example</title>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      padding: 20px;
      max-width: 1000px;
      margin: 0 auto;
      line-height: 1.6;
      color: #333;
    }
    h1, h2, h3 {
      color: #2563eb;
    }
    pre {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
      border: 1px solid #ddd;
    }
    code {
      background: #f5f5f5;
      padding: 2px 4px;
      border-radius: 3px;
      font-size: 0.9em;
    }
    .container {
      margin: 30px 0;
      border: 1px solid #eaeaea;
      padding: 20px;
      border-radius: 8px;
      background-color: #fafafa;
    }
    .tab-container {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
    }
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border: 1px solid transparent;
      border-bottom: none;
      margin-bottom: -1px;
      background-color: #f8f8f8;
      border-top-left-radius: 5px;
      border-top-right-radius: 5px;
    }
    .tab.active {
      background-color: white;
      border-color: #ddd;
      border-bottom-color: white;
    }
    .tab-content {
      display: none;
      padding: 20px;
      border: 1px solid #ddd;
      border-top: none;
      border-bottom-left-radius: 5px;
      border-bottom-right-radius: 5px;
      background-color: white;
    }
    .tab-content.active {
      display: block;
    }
    .button {
      display: inline-block;
      background-color: #2563eb;
      color: white;
      padding: 10px 15px;
      border-radius: 5px;
      text-decoration: none;
      margin-top: 10px;
      transition: background-color 0.2s;
    }
    .button:hover {
      background-color: #1d4ed8;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    table, th, td {
      border: 1px solid #ddd;
    }
    th, td {
      padding: 10px;
      text-align: left;
    }
    th {
      background-color: #f5f5f5;
    }
  </style>
</head>
<body>
  <h1>BiggerPockets Agent Finder Widget</h1>
  
  <h2>How to Embed the Widget</h2>
  <p>To embed the BiggerPockets Agent Finder Widget on your website, simply add the following code to your HTML page:</p>
  
  <pre>&lt;script 
  src="https://<your-replit-domain>/embed.js" 
  data-containerid="bp-agent-finder"
  data-width="100%"
  data-height="700px"
  data-borderradius="8px"
  data-boxshadow="0 4px 12px rgba(0, 0, 0, 0.1)"&gt;
&lt;/script&gt;</pre>
  
  <h2>Customization Options</h2>
  <p>You can customize the widget by adding the following data attributes to the script tag:</p>
  
  <table>
    <tr>
      <th>Attribute</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
    <tr>
      <td><code>data-containerid</code></td>
      <td>ID for the container element</td>
      <td>"bp-agent-finder"</td>
    </tr>
    <tr>
      <td><code>data-width</code></td>
      <td>Width of the widget</td>
      <td>"100%"</td>
    </tr>
    <tr>
      <td><code>data-height</code></td>
      <td>Height of the widget</td>
      <td>"650px"</td>
    </tr>
    <tr>
      <td><code>data-border</code></td>
      <td>Border style</td>
      <td>"none"</td>
    </tr>
    <tr>
      <td><code>data-borderradius</code></td>
      <td>Border radius</td>
      <td>"8px"</td>
    </tr>
    <tr>
      <td><code>data-boxshadow</code></td>
      <td>Box shadow</td>
      <td>"0 4px 12px rgba(0, 0, 0, 0.1)"</td>
    </tr>
    <tr>
      <td><code>data-scrolling</code></td>
      <td>Enable/disable iframe scrolling</td>
      <td>"no"</td>
    </tr>
  </table>
  
  <h2>Implementation Examples</h2>
  
  <div class="tab-container">
    <div class="tab active" onclick="openTab(event, 'basic')">Basic</div>
    <div class="tab" onclick="openTab(event, 'responsive')">Responsive</div>
    <div class="tab" onclick="openTab(event, 'styled')">Custom Styled</div>
    <div class="tab" onclick="openTab(event, 'wordpress')">WordPress</div>
  </div>
  
  <div id="basic" class="tab-content active">
    <h3>Basic Implementation</h3>
    <p>The simplest way to add the widget to any webpage:</p>
    <pre>&lt;script src="https://<your-replit-domain>/embed.js"&gt;&lt;/script&gt;</pre>
  </div>
  
  <div id="responsive" class="tab-content">
    <h3>Responsive Implementation</h3>
    <p>This implementation adjusts to fit the container's width:</p>
    <pre>&lt;div style="max-width: 800px; margin: 0 auto;"&gt;
  &lt;script 
    src="https://<your-replit-domain>/embed.js" 
    data-width="100%" 
    data-height="700px"&gt;
  &lt;/script&gt;
&lt;/div&gt;</pre>
  </div>
  
  <div id="styled" class="tab-content">
    <h3>Custom Styled Implementation</h3>
    <p>Customize the look and feel of the widget:</p>
    <pre>&lt;script 
  src="https://<your-replit-domain>/embed.js" 
  data-borderradius="12px"
  data-boxshadow="0 8px 24px rgba(0, 0, 0, 0.15)"
  data-border="1px solid #eaeaea"&gt;
&lt;/script&gt;</pre>
  </div>
  
  <div id="wordpress" class="tab-content">
    <h3>WordPress Implementation</h3>
    <p>Add to WordPress using a custom HTML block in your page or post:</p>
    <p>1. Edit your page or post</p>
    <p>2. Add a "Custom HTML" block</p>
    <p>3. Paste the following code:</p>
    <pre id="domain-example">&lt;script 
  src="https://<span class="current-domain">your-deployed-domain.replit.app</span>/embed.js" 
  data-width="100%" 
  data-height="700px"&gt;
&lt;/script&gt;</pre>
  </div>
  
  <h2>Live Example</h2>
  <div class="container">
    <!-- Embed the widget -->
    <script 
      src="embed.js" 
      data-containerid="live-example"
      data-width="100%"
      data-height="700px"
      data-borderradius="10px">
    </script>
  </div>
  
  <h2>Technical Details</h2>
  <p>The BiggerPockets Agent Finder Widget uses a secure iframe to load the form on your website. This ensures:</p>
  <ul>
    <li><strong>Security</strong>: The widget is isolated from your main site code</li>
    <li><strong>Reliability</strong>: Updates to the widget are automatically applied</li>
    <li><strong>Performance</strong>: The widget loads independently from your website</li>
  </ul>
  
  <h3>Integration API (Advanced)</h3>
  <p>For developers who need programmatic control over the widget, we offer a messaging API:</p>
  
  <div class="tab-container">
    <div class="tab active" onclick="openTab(event, 'api-send')">Sending Messages</div>
    <div class="tab" onclick="openTab(event, 'api-receive')">Receiving Events</div>
  </div>
  
  <div id="api-send" class="tab-content active">
    <h4>Sending Messages to the Widget</h4>
    <p>You can control the widget by sending messages to the iframe:</p>
    <pre>// Get reference to the iframe
const iframe = document.getElementById('bp-agent-finder').querySelector('iframe');

// Reset the form to initial state
iframe.contentWindow.postMessage({ type: 'reset' }, '*');

// Request the current form state
iframe.contentWindow.postMessage({ type: 'getState' }, '*');</pre>
  </div>
  
  <div id="api-receive" class="tab-content">
    <h4>Receiving Events from the Widget</h4>
    <p>Listen for events from the widget:</p>
    <pre>window.addEventListener('message', function(event) {
  // Make sure message is from your iframe
  if (event.origin !== 'https://<span class="current-domain">your-deployed-domain.replit.app</span>') return;
  
  const data = event.data;
  
  // Handle different message types
  switch (data.type) {
    case 'resize':
      // Widget height changed 
      console.log('New height:', data.height);
      break;
      
    case 'stepChange':
      // User moved to a different step
      console.log('Current form step:', data.step);
      break;
      
    case 'formSubmitted':
      // Form was successfully submitted
      console.log('Form submitted successfully!');
      
      // You can trigger your own analytics or redirect
      if (data.success) {
        console.log('Form was successfully submitted!');
        // analytics.track('Form Completed'); 
      }
      break;
      
    case 'state':
      // Response to getState request
      console.log('Current step:', data.step);
      console.log('Form completed:', data.completed);
      break;
  }
});</pre>
  </div>
  
  <p>If you have any questions or need assistance with the implementation, please contact our support team.</p>
  
  <script>
    function openTab(evt, tabName) {
      var i, tabContent, tabLinks;
      
      tabContent = document.getElementsByClassName("tab-content");
      for (i = 0; i < tabContent.length; i++) {
        tabContent[i].className = tabContent[i].className.replace(" active", "");
      }
      
      tabLinks = document.getElementsByClassName("tab");
      for (i = 0; i < tabLinks.length; i++) {
        tabLinks[i].className = tabLinks[i].className.replace(" active", "");
      }
      
      document.getElementById(tabName).className += " active";
      evt.currentTarget.className += " active";
    }
    
    // Update example code with the current domain
    document.addEventListener('DOMContentLoaded', function() {
      // Get the current domain
      const currentDomain = window.location.host;
      
      // Update all domain placeholders
      const domainElements = document.querySelectorAll('.current-domain');
      domainElements.forEach(function(element) {
        element.textContent = currentDomain;
      });
    });
  </script>
</body>
</html>